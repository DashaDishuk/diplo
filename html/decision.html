<!DOCTYPE html>
<html lang="en">
<head>
    <title>Decision</title>
    <link rel="stylesheet" href="../style.css">
        <script type="text/javascript">
        let criterions = new Array();

        function criterionsEnter() {
            var criterionsAmount= parseInt(document.getElementById("criterionsAmount").value, 10);
            alert(criterionsAmount);
            
            //create buttons for criterias. to choose what kind are they
            for (i=0;i<criterionsAmount;i++){
                criterions[i]=new Map();
                criterions[i].set("name",prompt("name","somename"));
                
                var newDiv = document.createElement("div");
                var str=criterions[i].get("name");
                newDiv.innerHTML ='<h1>'+str+'</h1>';
                newDiv.setAttribute('id','div'+str);
                document.body.appendChild(newDiv);

                var newButtonL = document.createElement("input");
                newButtonL.setAttribute('type','button');
                newButtonL.setAttribute('id','funcChoosing'+str);
                newButtonL.setAttribute('value','Functional '+str+' criterion');
                newButtonL.setAttribute('onClick','funcСriterionsCreation("'+str+'",'+i+')');

                var newButtonR = document.createElement("input");
                newButtonR.setAttribute('type','button');
                newButtonR.setAttribute('id','tablChoosing'+str);
                newButtonR.setAttribute('value','Table '+str+' criterion');
                newButtonR.setAttribute('onClick','tablСriterionsChoosing("'+str+'",'+i+')');
                
                var newButtonC = document.createElement("input");
                newButtonC.setAttribute('type','button');
                newButtonC.setAttribute('id','simpChoosing'+str);
                newButtonC.setAttribute('value','Simple '+str+' criterion');
                newButtonC.setAttribute('onClick','simpСriterionsChoosing("'+str+'",'+i+')');

                var newForm=document.createElement("form");
                newForm.setAttribute('id','form'+str);
                newForm.appendChild(newButtonL);
                newForm.appendChild(newButtonR);
                newForm.appendChild(newButtonC);
                document.body.appendChild(newForm);
                }

            return new_criterionsAmount;}

            //TODO choosing kind of functions
            function funcСriterionsCreation(str,i){
                criterions[i].set("criterionType","func");

                var newButtonO = document.createElement("button");
                newButtonO.setAttribute('id','func'+str);
                newButtonO.innerHTML="<img src='../img/one.jpg' />"
                newButtonO.setAttribute('value','Functionamount'+str+' criterion');
                newButtonO.setAttribute('onClick','tablСriterionsCreation("'+str+'",'+i+')');
                
                var newButtonT = document.createElement("button");
                newButtonT.setAttribute('id','func'+str);
                newButtonT.innerHTML="<img src='../img/three.jpg' />"
                newButtonT.setAttribute('value','Functionamount'+str+' criterion');
                newButtonT.setAttribute('onClick','tablСriterionsCreation("'+str+'",'+i+')');
                
                document.getElementById("funcChoosing"+str).replaceWith(newButtonO);
                document.getElementById("tablChoosing"+str).replaceWith(newButtonT);
                document.getElementById("simpChoosing"+str).remove();
            }
            
            //DONE creates field for amount and button to submin for criterias as tables
            function tablСriterionsChoosing(str,i){
                criterions[i].set("criterionType","table");

                var newDiv=document.createElement("input");
                newDiv.setAttribute('type','text');
                newDiv.setAttribute('id','paramsAmountFor'+str);
                newDiv.setAttribute('value','0');
                
                var newButton = document.createElement("input");
                newButton.setAttribute('type','button');
                newButton.setAttribute('id','tabl'+str);
                newButton.setAttribute('value','Table amount'+str+' criterion');
                newButton.setAttribute('onClick','tablСriterionsCreation("'+str+'",'+i+')');
                                
                document.getElementById("form"+str).prepend(newDiv);
                document.getElementById("funcChoosing"+str).replaceWith(newButton);
                document.getElementById("tablChoosing"+str).remove();
                document.getElementById("simpChoosing"+str).remove();
            }

            //DONE create table for entering params
            function tablСriterionsCreation(str,i) {
                var paramsAmount=parseInt(document.getElementById("paramsAmountFor"+str).value, 10);
                var innerHtmlText='';
                for (k=0;k<paramsAmount+1;k++){
                    innerHtmlText+='<div>';
                    for (j=0;j<paramsAmount;j++){
                       innerHtmlText+='<input type="text" id="'+str+k+j+'" value="1">';
                    }
                    innerHtmlText+='</div>';
                }
           
                var newButtonR = document.createElement("input");
                newButtonR.setAttribute('type','button');
                newButtonR.setAttribute('id','tablSaving'+str);
                newButtonR.setAttribute('value','Table '+str+' criterion save');
                newButtonR.setAttribute('onClick','tablСriterionsSave("'+str+'",'+i+','+paramsAmount+')');
 
                var newForm=document.createElement("form");
                newForm.setAttribute('id',str+"form");
                newForm.innerHTML=innerHtmlText;
                document.getElementById("paramsAmountFor"+str).replaceWith(newForm);
                document.getElementById("tabl"+str).replaceWith(newButtonR);

            }

            //DONE saving users data from tables 
            function tablСriterionsSave(str,i,j){
                let temp=new Array(j);
                let names=new Array(j);
                for (k=0;k<j;k++){
                    temp[k]=[];
                    names[k]=document.getElementById(str+0+k).value;
                    for (q=1;q<j+1;q++){
                        temp[k][q-1]=parseInt(document.getElementById(str+q+k).value, 10);
                    }
                }
                criterions[i].set("paramValues",temp);
                criterions[i].set("paramnames",names);

                document.getElementById(str+"form").remove();
                document.getElementById('tablSaving'+str).remove();

            }

            function saveFuncCriterions() {
                
            }

            function simpСriterionsChoosing(){

            }

        </script>
        <style>
        </style>
    </head>
    <body><center>
    <form name="form" id="criterionsForm">
        <label>Количество критериев:</label>
    <input type="text" id="criterionsAmount" value="0" />
    <input type="button" value="show" onClick="criterionsEnter()">
    </form>
</center>    
</body>
</html>