<!DOCTYPE html>
<html lang="en">
<head>
    <title>Decision</title>
    <link rel="stylesheet" href="../style.css">
        <script type="text/javascript">
        let criterions = new Array();

        function criterionsEnter() {
            var criterionsAmount= parseInt(document.getElementById("criterionsAmount").value, 10);
            alert(criterionsAmount);
            
            //create buttons for criterias. to choose what kind are they
            for (i=0;i<criterionsAmount;i++){
                criterions[i]=new Map();
                criterions[i].set("name",prompt("name","somename"));
                
                var newDiv = document.createElement("div");
                var str=criterions[i].get("name");
                newDiv.innerHTML ='<h1>'+str+'</h1>';
                newDiv.setAttribute('id','div'+str);
                document.body.appendChild(newDiv);

                var newButtonL = document.createElement("input");
                newButtonL.setAttribute('type','button');
                newButtonL.setAttribute('id','funcChoosing'+str);
                newButtonL.setAttribute('value','Functional '+str+' criterion');
                newButtonL.setAttribute('onClick','funcСriterionsCreation("'+str+'",'+i+')');

                var newButtonR = document.createElement("input");
                newButtonR.setAttribute('type','button');
                newButtonR.setAttribute('id','tablChoosing'+str);
                newButtonR.setAttribute('value','Table '+str+' criterion');
                newButtonR.setAttribute('onClick','tablСriterionsChoosing("'+str+'",'+i+')');

                var newForm=document.createElement("form");
                newForm.setAttribute('id','form'+str);
                newForm.appendChild(newButtonL);
                newForm.appendChild(newButtonR);
                document.body.appendChild(newForm);
                }

            return new_criterionsAmount;}

            //creates fields for criterias as functions
            function funcСriterionsCreation(str,i){
                alert('func');
                var newDiv=document.createElement("div");
                newDiv.innerHTML="<p>"+str+"</p>";
                
                var newB2=document.createElement("div");
                newB2.innerHTML="<p>lol "+str+"</p>";
                
                
                document.getElementById("form"+str).prepend(newDiv);
                alert("after prepend");
                document.getElementById("funcChoosing"+str).replaceWith(newB2);
                alert("after replace");
                document.getElementById("tablChoosing"+str).remove();
                alert(i);
            }
            
            //creates field for amount and button to submin for criterias as tables
            function tablСriterionsChoosing(str,i){
                var newDiv=document.createElement("input");
                newDiv.setAttribute('type','text');
                newDiv.setAttribute('id','paramsAmountFor'+str);
                newDiv.setAttribute('value','0');
                
                var newButton = document.createElement("input");
                newButton.setAttribute('type','button');
                newButton.setAttribute('id','tabl'+str);
                newButton.setAttribute('value','Table amount'+str+' criterion');
                newButton.setAttribute('onClick','tablСriterionsCreation("'+str+'",'+i+')');
                                
                document.getElementById("form"+str).prepend(newDiv);
                document.getElementById("funcChoosing"+str).replaceWith(newButton);
                document.getElementById("tablChoosing"+str).remove();
            }

            //create table for entering params
            function tablСriterionsCreation(str,i) {
                var paramsAmount= parseInt(document.getElementById("paramsAmountFor"+str).value, 10);
            alert(paramsAmount);
            var innerHtmlText='';
            for (k=0;k<paramsAmount+1;k++){
                innerHtmlText+='<div>';
                for (j=0;j<paramsAmount;j++){
                    innerHtmlText+='<input type="text" id="'+str+k+j+'" value="1">';
                }
                innerHtmlText+='</div>';
            }
           
            var newButtonR = document.createElement("input");
                newButtonR.setAttribute('type','button');
                newButtonR.setAttribute('id','tablSaving'+str);
                newButtonR.setAttribute('value','Table '+str+' criterion save');
                newButtonR.setAttribute('onClick','tablСriterionsSave("'+str+'",'+i+','+paramsAmount+')');
 
            var newForm=document.createElement("form");
            newForm.innerHTML=innerHtmlText;
            newForm.appendChild(newButtonR);
            alert(innerHtmlText);

            document.body.appendChild(newForm);

            }

            function tablСriterionsSave(str,i,j){
                alert(j);
                for (k=0;k<j+1;k++){
                    for (q=0;q<j;q++){
                        alert(parseInt(document.getElementById(str+k+q).value, 10));
                    }
                }
                var paramsAmount= parseInt(document.getElementById(str+j+(j+1)).value, 10);
                alert(paramsAmount);
                k=j;
            /*for (k=0;k<paramsAmount+1;k++){
                innerHtmlText+='<div>';
                for (j=0;j<paramsAmount;j++){
                    innerHtmlText+='<input type="text" id="'+str+k+j+'" value="1">';
                }
                innerHtmlText+='</div>';
            }*/

                criterions[i].set("paramnames",prompt("name","somename"));

            }

            function saveFuncCriterions() {
                
            }

        </script>
        <style>
        </style>
    </head>
    <body><center>
    <form name="form" id="criterionsForm">
        <label>Количество критериев:</label>
    <input type="text" id="criterionsAmount" value="0" />
    <input type="button" value="show" onClick="criterionsEnter()">
    </form>
</center>    
</body>
</html>